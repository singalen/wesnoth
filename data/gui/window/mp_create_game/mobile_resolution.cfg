#textdomain wesnoth-lib

#define _MAP_SELECTION_AND_PREVIEW_GRID
	[grid]

		[row]
			grow_factor = 1

			# map listbox
			[column]
				grow_factor = 0
				horizontal_grow = true
				vertical_grow = true

				{_GUI_MP_CREATE_GAME_LIST}
			[/column]

			# minimap
			[column]
				grow_factor = 1
				horizontal_grow = true
				# FIXME: Reduce the cell size when the game list changes.
				vertical_grow = true

				[grid]

					[row]
						grow_factor = 0

						[column]
							border = "all"
							border_size = 5
							horizontal_grow = true

							[label]
								definition = "default_large"
								id = "game_title"
							[/label]

						[/column]

					[/row]

					[row]
						grow_factor = 0

						[column]
							grow_factor = 1
							horizontal_grow = true

							[grid]

								[row]
									grow_factor = 1

									{_GUI_MP_CREATE_MINIMAP_STACK "200"}

								[/row]
							[/grid]
						[/column]

					[/row]

					[row]
						grow_factor = 0

						[column]
							horizontal_grow = true

							[grid]

								[row]

									[column]
										grow_factor = 0

										border = "all"
										border_size = 5
										horizontal_alignment = "left"
										[label]
											definition = "default"

											label = _ "Players:"
										[/label]

									[/column]

									[column]
										grow_factor = 1

										border = "all"
										border_size = 5
										horizontal_grow = true
										[label]
											id = "map_num_players"
											definition = "default"
										[/label]

									[/column]
								[/row]

							[/grid]

						[/column]

					[/row]

					[row]
						grow_factor = 0

						[column]
							horizontal_grow = true

							[grid]

								[row]

									[column]
										grow_factor = 0

										border = "all"
										border_size = 5
										horizontal_alignment = "left"
										[label]
											definition = "default"

											label = _ "Map size:"
										[/label]

									[/column]

									[column]
										grow_factor = 1

										border = "all"
										border_size = 5
										horizontal_grow = true
										[label]
											id = "map_size"
											definition = "default"
										[/label]

									[/column]
								[/row]

							[/grid]

						[/column]

					[/row]

					[row]
						# last item needs to grow and align at top so the things won't get centered.
						grow_factor = 1

						[column]
							grow_factor = 1
							vertical_grow = true
							horizontal_grow = true
							border = "all"
							border_size = 5

							[scroll_label]
								id = "description"
								definition = "default_small"

								horizontal_scrollbar_mode = "never"
								vertical_scrollbar_mode = "auto"
							[/scroll_label]

						[/column]

					[/row]

				[/grid]

			[/column]

		[/row]

	[/grid]

#enddef

#define _GUI_MP_CREATE_GAME_BUTTON_GRID
	[grid]
		# FIXME: Shift the buttons to the left.
		[row]
			grow_factor = 0

			[column]
				grow_factor = 1
				border = "all"
				border_size = 5
				horizontal_alignment = "right"

				[button]
					id = "ok"
					definition = "default"
					label = _ "Create Game"
				[/button]
			[/column]

			[column]
				grow_factor = 0
				border = "all"
				border_size = 5
				horizontal_alignment = "left"

				[button]
					id = "cancel"
					definition = "default"
					label = _ "Cancel"
				[/button]
			[/column]
		[/row]
	[/grid]
#enddef

#define _GUI_MP_GAME_NAME_ERAS_GRID
	[grid]
		# Name and password, 2 rows
		{_GUI_MP_CREATE_MAIN_OPTIONS}

		[row]
			{_GUI_MP_CREATE_SHUFFLE_TOGGLE}
			{_GUI_MP_CREATE_OBSERVER_TOGGLE}
		[/row]

		[row]
			{_GUI_MP_CREATE_REGISTERED_TOGGLE}
			{_GUI_MP_CREATE_SYNC_TOGGLE}
		[/row]
	[/grid]
#enddef


[resolution]
	definition = "mp_create"
	window_width = 640
	window_height = 480

	{GUI_WINDOW_FULLSCREEN}

	[linked_group]
		id = "game_icons"
		fixed_width = true
	[/linked_group]

	{_GUI_CUSTOM_OPTIONS_TREE_LINKED_GROUPS}

	[tooltip]
		id = "tooltip"
	[/tooltip]

	[helptip]
		id = "tooltip"
	[/helptip]

	[grid]
		### Here goes everything.
		### TODO: Hide and show the unneeded sections dynamically. Like:
		### only show random map settings for a random map scenarios,
		### only show nonempty custom settings,
		### only show "Game Settings" when "Use map settings" is unchecked,
		### and same for "Time limit".

		[row]
			[column]
				[scrollbar_panel]
					[definition]

						### The first two sections are a redesign of _GUI_MP_CREATE_GENERAL_PANEL.
						### Maybe we just need to saw its definition into several widgets and rearrange them.

						[row]
							[column]
								grow_factor = 1

								border = "all"
								border_size = 5
								horizontal_alignment = "left"
								[label]
									definition = "title"
									label = _ "Create Game"
								[/label]
							[/column]
						[/row]

						### Section 1: map selection and preview
						[row]
							[column]
								{_MAP_SELECTION_AND_PREVIEW_GRID}
							[/column]
						[/row]

						### Section 2: Game general options
						[row]
							[column]
								border = "all"
								border_size = 5
								horizontal_alignment = "left"

								[label]
									definition = "title"
									label = _ "General"
								[/label]
							[/column]
						[/row]

						[row]
							[column]
								horizontal_grow = true
								{_GUI_MP_GAME_NAME_ERAS_GRID}
							[/column]
						[/row]

						[row]
							[column]
								horizontal_grow = true
								[grid]
									{_GUI_MP_CREATE_GENERAL_PANEL "default_tiny" 45}
								[/grid]
							[/column]
						[/row]

						### Section 3: Game settings.
						[row]
							[column]
								border = "all"
								border_size = 5
								horizontal_alignment = "left"

								[label]
									definition = "title"
									label = _ "Game Settings"
								[/label]
							[/column]
						[/row]

						[row]
							[column]
								horizontal_alignment = "left"

								[grid]
									{_GUI_MP_CREATE_MAP_SETTINGS}
								[/grid]
							[/column]
						[/row]

						### Section 4: Random map settings. So far, exist in a separate window.
						[row]
							[column]
								border = "all"
								border_size = 5
								horizontal_alignment = "left"

								[label]
									definition = "title"
									label = _ "Random map options: "
								[/label]
							[/column]
						[/row]

						[row]
							# It's a [column]
							# FIXME: Center! Will have to fiddle with mp_create_game, or duplicate the definition here.
							{_GUI_MP_CREATE_MAP_OPTIONS_ROW}
						[/row]

						### Section 5: Custom options
						[row]
							[column]
								border = "all"
								border_size = 5
								horizontal_alignment = "left"

								[label]
									definition = "title"
									label = _ "Custom Options"
								[/label]
							[/column]
						[/row]

						[row]
							[column]
								[grid]
									{_GUI_CUSTOM_OPTIONS_TREE}
								[/grid]
							[/column]
						[/row]

						[row]
							[column]
								horizontal_grow = true
								[grid]
									{_GUI_MP_CREATE_TIME_LIMIT}
								[/grid]
							[/column]
						[/row]

					[/definition]
				[/scrollbar_panel]
			[/column]
		[/row]

		### Finally, buttons!
		[row]
			[column]
				horizontal_alignment = "right"
				{_GUI_MP_CREATE_GAME_BUTTON_GRID}
			[/column]
		[/row]
	[/grid]

[/resolution]

#undef _MAP_SELECTION_AND_PREVIEW_GRID
#undef _GUI_MP_CREATE_GAME_BUTTON_GRID
#undef _GUI_MP_GAME_NAME_ERAS_GRID

# A sample of vertical spacer:
#
#	[row]
#		grow_factor = 1
#
#		[column]
#			[spacer]
#				height = 20
#			[/spacer]
#		[/column]
#	[/row]
